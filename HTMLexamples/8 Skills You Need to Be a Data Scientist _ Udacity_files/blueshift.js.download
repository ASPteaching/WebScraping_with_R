!function(){var e="https:"===document.location.protocol?"https:":"http:",t=e+"//"+(window._bsfthost||"api.getblueshift.com")+"/",d=t+"unity.gif",n=t+"cookiejar.json",f=e+"//ib.adnxs.com/getuid?",o=!1,l=!1,p=!1,h="undefined"!=typeof XMLHttpRequest&&"withCredentials"in new XMLHttpRequest;var r,w={eventApiKey:void 0,userParams:{},slots:[],slotParams:{},tz:(new Date).getTimezoneOffset()};function i(e,t){t.tz=w.tz;var n={x:w.eventApiKey,slot:e,user:w.userParams,context:t};return"true"==function(e){var t=window.location.href;e=e.replace(/[\[\]]/g,"\\$&");var n=new RegExp("[?&]"+e+"(=([^&#]*)|&|#|$)").exec(t);return n?n[2]?decodeURIComponent(n[2].replace(/\+/g," ")):"":null}("dev")&&(n.dev=!0),JSON.stringify(n)}function a(e){!function(){w.slots=[];for(var e=document.querySelectorAll("[data-bsft-slot]"),t=0;t<e.length;t++)w.slots.push({name:e[t].dataset.bsftSlot,el:e[t]})}(),w.slotParams=e||{},function(){for(var s=[],e=0;e<w.slots.length;e++)!function(a){s[a]=g(),s[a].open("POST",t+"live",!0),s[a].setRequestHeader("Content-Type","application/json"),s[a].onreadystatechange=function(){if(4===s[a].readyState&&200==s[a].status){try{var e=JSON.parse(s[a].responseText)}catch(e){console.log("error loading slot",e)}e&&e.show&&(t=w.slots[a].el,n=e.width,o=e.height,r=e.content,i=document.createElement("iframe"),t.innerHTML="",t.appendChild(i),i.src="javascript:''",i.style.width=n,i.style.height=o,i.style.border="none",i.contentWindow.document.open(),i.contentWindow.document.write(r),i.contentWindow.document.close(),t.style.width=n,t.style.height=o,t.style.display="block")}var t,n,o,r,i},s[a].send(i(w.slots[a].name,w.slotParams[w.slots[a].name]||{}))}(e)}()}function m(e,t){var n=document.getElementById(e);q(n,"change",function(){x({0:"icapture",1:t,2:document.getElementById(e).value})},!1)}function y(e){new Image(1,1).src=e}function b(e){try{if(null!=k("_bs_fb_pushed"))return;request=n+"?x="+window._blueshiftid+"&k="+e;var t=g();t.open("GET",request,!0),t.onreadystatechange=function(){4==t.readyState&&200==t.status&&function(e){if(function(e){for(var t in e)if(e.hasOwnProperty(t))return!1;return!0}(e))return;window._fbq=window._fbq||[],window._fbq.push(["track","user_attributes",e]),N("_bs_fb_pushed","1",1)}(JSON.parse(t.responseText))},t.send(request)}catch(e){}}function g(){if(window.XMLHttpRequest)try{var t=new XMLHttpRequest}catch(e){t=new window.ActiveXObject("Microsoft.XMLHTTP")}return t}function N(e,t,n){var o=new Date;o.setDate(o.getDate()+n);var r=window.location.hostname,i=r.split(".");4==i.length&&0<=i[0]&&i[0]<=255&&0<=i[1]&&i[1]<=255&&0<=i[2]&&i[2]<=255&&0<=i[3]&&i[3]<=255||(r="."+r.replace(/^www./,""));var a=escape(t)+(null==n?"":";expires="+o.toUTCString())+";path=/;domain="+r;document.cookie=e+"="+a}function k(e){var t,n,o,r=document.cookie.split(";");for(t=0;t<r.length;t++)if(n=r[t].substr(0,r[t].indexOf("=")),o=r[t].substr(r[t].indexOf("=")+1),(n=n.replace(/^\s+|\s+$/g,""))==e)return unescape(o)}function s(e){var t,n,o=e[0],r=function(){var t="";try{t=window.top.document.referrer}catch(e){if(window.parent)try{t=window.parent.document.referrer}catch(e){t=""}}return""===t&&(t=document.referrer),t}(),i=Math.floor(1e6*Math.random()+1),a=Math.round(new Date/1e3),s=k("_bs");if("object"==typeof analytics&&"function"==typeof analytics.user&&(t=_blueshiftid,"YmU3MGIwNGVkMzUyZDAzYjA5NDc5NmJjNWZjZTdiMDU="!==(n=btoa(t))&&"MWM2ZGEyNGExOGM1MjQyNTNlZTExNmU0YzUzOTNjZWY="!==n)){var c=analytics.user().anonymousId();s!=c&&N("_bs",c,365),s=c}if(null==s&&N("_bs",s=function(){function e(){return Math.floor(65536*(1+Math.random())).toString(16).substring(1)}return e()+e()+"-"+e()+"-"+e()+"-"+e()+"-"+e()+e()+e()}(),365),"config"==o&&e[1])return e[1].trackClicks&&q(document,"click",function(e){e=e||window.event,element=e.target||e.srcElement,element.href&&x(["click",{p:function(e){for(var t=[];null!=e.parentNode;){for(var n=0,o=0,r=0;r<e.parentNode.childNodes.length;r++){var i=e.parentNode.childNodes[r];i.nodeName==e.nodeName&&(i===e&&(o=n),n++)}""!=e.id?t.unshift(e.nodeName.toLowerCase()+"#"+e.id):1<n?t.unshift(e.nodeName.toLowerCase()+"["+o+"]"):t.unshift(e.nodeName.toLowerCase()),e=e.parentNode}return t}(element).toString(),c:element.href,a:element.innerHTML}])}),!0;if("identify"==o&&(w.userParams=e[1]||{},w.userParams.cookie=s),"track"==o)o=e[1],e=e[2];else{if("capture"==o)return m(e[1],e[2]),!0;if("retarget"==o)return req=f+d+"?t="+a+"&e=appnexus&z="+i+"&x="+window._blueshiftid+"&k="+s+"&appnexus_id=$UID&u="+encodeURIComponent(encodeURIComponent(window.location.href))+"&r="+encodeURIComponent(encodeURIComponent(r)),y(req),!0;if("facebook"==o)return p=!0;"icapture"==o?(o="capture",u=e[1],value=e[2],(e={})[u]=value):e=e[1]}for(var u in req=d+"?t="+a+"&e="+o+"&r="+encodeURIComponent(r)+"&z="+i+"&x="+window._blueshiftid+"&k="+s+"&u="+encodeURIComponent(window.location.href),e)v=e[u],"object"==typeof v?req+="&"+u+"_json="+encodeURIComponent(JSON.stringify(v)):req+="&"+u+"="+encodeURIComponent(v);return h?function(e){try{xhr=g(),xhr.open("GET",e,!0),xhr.send(e)}catch(e){}}(req):y(req),1==p&&"pageload"==o&&b(s),1==l&&"pageload"==o&&(req=f+d+"?t="+a+"&e=appnexus&z="+i+"&x="+window._blueshiftid+"&k="+s+"&appnexus_id=$UID&u="+encodeURIComponent(encodeURIComponent(window.location.href))+"&r="+encodeURIComponent(encodeURIComponent(r)),y(req)),1==p&&"pageload"==o&&b(s),!0}function c(e,t){setTimeout(function(){x(e)},t)}function x(e){if(null!=e[0])if(o)if("identify"!==e[0])if(w.userParams.cookie||1e3<new Date-r)switch(e[0]){case"live":a(e[1]);break;default:s(e)}else c(e,20);else s(e);else c(e,20)}function u(){o=!0,r=new Date,w.eventApiKey=_blueshiftid}if("object"==typeof blueshift){var _=void 0===blueshift.slice?[]:blueshift.slice(0);for(blueshift={events:[],load:function(){u()},capture:function(e,t){m(e,t)},retarget:function(){x(["retarget"])},facebook:function(){x(["facebook"])},track:function(e,t){x(["track",e,t])},pageload:function(e){x(["pageload",e])},identify:function(e){x(["identify",e])},live:function(e){x(["live",e])}},C=0;C<_.length;C++)blueshift.events.push(_[C])}if(document.addEventListener)var q=function(e,t,n){e.addEventListener(t,n,!1)};else q=function(e,t,n){e.attachEvent("on"+t,n)};for(var C=0;C<blueshift.events.length;C++)x(blueshift.events[C]);"complete"===document.readyState?u():window.addEventListener?window.addEventListener("load",u,!1):window.attachEvent&&window.attachEvent("onload",u)}();